{"version":3,"sources":["webpack:///./src/views/Login.vue?7b52","webpack:///./src/views/Login.vue","webpack:///./src/global/Util.ts","webpack:///./src/views/Login.vue?d92d","webpack:///./src/views/Login.vue?835e","webpack:///./src/views/Login.vue?f6ef"],"names":["class","type","login","username","placeholder","password","resMessage","sleep","ms","Promise","resolve","setTimeout","this","checkInputCorrect","err","sentLoginRequest","loginResult","ok","token","store","commit","AUTH","SET_API_ACCESS_TOKEN","push","name","reject","a","post","then","resp","data","catch","e","render","__scopeId"],"mappings":"yGAAA,W,sICCOA,MAAM,S,EACT,eAAmB,UAAf,cAAU,G,EAEZ,eAAwB,aAAjB,aAAS,G,EAMhB,eAAuB,aAAhB,YAAQ,G,EAKf,eAAM,mB,EACN,eAAoC,UAA5BC,KAAK,UAAS,SAAK,G,wEAf/B,eAmBM,MAnBN,EAmBM,CAlBJ,EACA,eAgBO,QAhBDD,MAAM,aAAc,SAAM,8CAAU,EAAAE,OAAA,EAAAA,MAAA,qBAAK,e,CAC7C,E,eACA,eAA+D,S,qDAA/C,EAAAC,SAAQ,IAAEF,KAAK,OAAOG,YAAY,Y,mBAAlC,EAAAD,YAKhB,E,eACA,eAAmE,S,qDAAnD,EAAAE,SAAQ,IAAEJ,KAAK,WAAWG,YAAY,Y,mBAAtC,EAAAC,YAIhB,EACA,E,eACA,eAAmD,4BAArB,EAAAC,YAAU,M,QAAzB,EAAAA,e,gKCjBf,SAAUC,EAAMC,GACpB,OAAO,IAAIC,SAAQ,SAACC,GAAD,OAAaC,WAAWD,EAASF,MCatD,IAAqB,EAArB,yG,0BACE,EAAAL,SAAW,GAEX,EAAAE,SAAW,GAEX,EAAAC,WAAa,GALf,uGAOE,mHACMH,EAAWS,KAAKT,SAChBE,EAAWO,KAAKP,SAFtB,SAGkBO,KAAKC,kBAAkBV,EAAUE,GAHnD,UAGMS,EAHN,OAIc,KAARA,EAJN,uBAKIF,KAAKN,WAAaQ,EALtB,2CAkB0BF,KAAKG,iBAAiBZ,EAAUE,GAlB1D,WAkBMW,EAlBN,OAmBOA,EAAYC,GAnBnB,wBAqBIL,KAAKN,WAAa,+CArBtB,8BAwB4B,KAAtBU,EAAYE,MAxBlB,wBA0BIN,KAAKN,WAAa,oCA1BtB,kCA6BQa,EAAQ,iBACdA,EAAMC,OAAO,OAAiBC,KAAKC,qBAAsBN,EAAYE,OACrEN,KAAKN,WAAa,kDA/BpB,UAiCQC,EAAM,KAjCd,eAkCE,OAAOgB,KAAK,CAAEC,KAAM,SAlCtB,oEAPF,gJA6CU,WACNrB,EACAE,GAFM,0GAKC,IAAII,SAAuB,SAACC,EAASe,GAE1C,EAAAC,EACGC,KAAoB,aAAc,CACjCxB,SAAUA,EACVE,SAAUA,IAGXuB,MAAK,SAACC,GACLnB,EAAQmB,EAAKC,SAEdC,OAAM,SAACC,GACNP,EAAO,gCAAkCO,UAjBzC,2CA7CV,oJAmEU,WACN7B,EACAE,GAFM,0GAKC,IALD,2CAnEV,iEAAuC,QAAlB,EAAS,gBAD7B,eAAQ,KACY,W,oBCRrB,EAAO4B,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,yDCTf,W","file":"js/about.7567a488.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=1&id=fec49d2a&scoped=true&lang=css\"","<template>\r\n  <div class=\"login\">\r\n    <h1>LOGIN PAGE</h1>\r\n    <form class=\"login_form\" @submit.prevent=\"login\">\r\n      <label>User name</label>\r\n      <input v-model=\"username\" type=\"text\" placeholder=\"UserName\" />\r\n      <!-- <label v-show=\"errorMessagByUserNameSideText\">{{\r\n        errorMessagByUserNameSideText\r\n      }}</label> -->\r\n\r\n      <label>Password</label>\r\n      <input v-model=\"password\" type=\"password\" placeholder=\"Password\" />\r\n      <!-- <label v-show=\"errorMessagByPasswordSideText\">{{\r\n        errorMessagByPasswordSideText\r\n      }}</label> -->\r\n      <hr />\r\n      <button type=\"submit\">Login</button>\r\n      <label v-show=\"resMessage\">{{ resMessage }}</label>\r\n      <!-- /> -->\r\n    </form>\r\n  </div>\r\n</template>\r\n<style scope>\r\n.login_form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 300px;\r\n  padding: 10px;\r\n}\r\n</style>\r\n\r\n<script lang=\"ts\">\r\nimport { Options, Vue } from \"vue-class-component\";\r\nimport { useStore, AllMutationTypes } from \"@/store\";\r\nimport routes from \"@/router\";\r\nimport axios from \"axios\";\r\nimport { PositionClass, PositionPoint } from \"../global/Positions\";\r\nimport { sleep } from \"@/global/Util\";\r\ntype LoginResponse = {\r\n  ok: boolean;\r\n  err: string;\r\n  token: string;\r\n};\r\n\r\n@Options({})\r\nexport default class LoginPage extends Vue {\r\n  username = \"\";\r\n  // errorMessagByUserNameSideText = \"\";\r\n  password = \"\";\r\n  // errorMessagByPasswordSideText = \"\";\r\n  resMessage = \"\";\r\n  // do login\r\n  async login() {\r\n    let username = this.username;\r\n    let password = this.password;\r\n    let err = await this.checkInputCorrect(username, password);\r\n    if (err !== \"\") {\r\n      this.resMessage = err;\r\n      return;\r\n    }\r\n    let position: PositionPoint;\r\n    // try {\r\n    //   position = await new PositionClass().getPosition();\r\n    // } catch (e) {\r\n    //   this.resMessage =\r\n    //     e == typeof \"\"\r\n    //       ? e\r\n    //       : \"Error : the PositionClass().getPosition() error object should be string\";\r\n    //   return;\r\n    // }\r\n    let loginResult = await this.sentLoginRequest(username, password);\r\n    if (!loginResult.ok) {\r\n      // err\r\n      this.resMessage = \"Fail to login, username or password is wrong\";\r\n      return;\r\n    }\r\n    if (loginResult.token === \"\") {\r\n      //  err\r\n      this.resMessage = \"Error, loginResult.token is empty\";\r\n      return;\r\n    }\r\n    const store = useStore();\r\n    store.commit(AllMutationTypes.AUTH.SET_API_ACCESS_TOKEN, loginResult.token);\r\n    this.resMessage = \"Login success, redirect to home after 3 sec ...\";\r\n    // sleep\r\n    await sleep(3000);\r\n    routes.push({ name: \"Home\" });\r\n    return;\r\n  }\r\n  // sent the login request to server\r\n  private async sentLoginRequest(\r\n    username: any,\r\n    password: any\r\n    // position: PositionPoint\r\n  ): Promise<LoginResponse> {\r\n    return new Promise<LoginResponse>((resolve, reject) => {\r\n      // try {\r\n      axios\r\n        .post<LoginResponse>(\"/api/login\", {\r\n          username: username,\r\n          password: password,\r\n          // position: position,\r\n        })\r\n        .then((resp) => {\r\n          resolve(resp.data);\r\n        })\r\n        .catch((e) => {\r\n          reject(\"Error when call /api/login : \" + e);\r\n        });\r\n    });\r\n  }\r\n  // check if the input format correct\r\n  private async checkInputCorrect(\r\n    username: any,\r\n    password: any\r\n  ): Promise<string> {\r\n    // check\r\n    return \"\";\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.login {\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: center;\r\n  background: rgb(255, 171, 171);\r\n}\r\n.login > form * {\r\n  width: 100%;\r\n}\r\n.login > form {\r\n  width: 500px;\r\n}\r\n.login_form {\r\n  display: block;\r\n  float: left;\r\n}\r\n</style>","export function sleep(ms: number) {\r\n  return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\n","\r\nimport { Options, Vue } from \"vue-class-component\";\r\nimport { useStore, AllMutationTypes } from \"@/store\";\r\nimport routes from \"@/router\";\r\nimport axios from \"axios\";\r\nimport { PositionClass, PositionPoint } from \"../global/Positions\";\r\nimport { sleep } from \"@/global/Util\";\r\ntype LoginResponse = {\r\n  ok: boolean;\r\n  err: string;\r\n  token: string;\r\n};\r\n\r\n@Options({})\r\nexport default class LoginPage extends Vue {\r\n  username = \"\";\r\n  // errorMessagByUserNameSideText = \"\";\r\n  password = \"\";\r\n  // errorMessagByPasswordSideText = \"\";\r\n  resMessage = \"\";\r\n  // do login\r\n  async login() {\r\n    let username = this.username;\r\n    let password = this.password;\r\n    let err = await this.checkInputCorrect(username, password);\r\n    if (err !== \"\") {\r\n      this.resMessage = err;\r\n      return;\r\n    }\r\n    let position: PositionPoint;\r\n    // try {\r\n    //   position = await new PositionClass().getPosition();\r\n    // } catch (e) {\r\n    //   this.resMessage =\r\n    //     e == typeof \"\"\r\n    //       ? e\r\n    //       : \"Error : the PositionClass().getPosition() error object should be string\";\r\n    //   return;\r\n    // }\r\n    let loginResult = await this.sentLoginRequest(username, password);\r\n    if (!loginResult.ok) {\r\n      // err\r\n      this.resMessage = \"Fail to login, username or password is wrong\";\r\n      return;\r\n    }\r\n    if (loginResult.token === \"\") {\r\n      //  err\r\n      this.resMessage = \"Error, loginResult.token is empty\";\r\n      return;\r\n    }\r\n    const store = useStore();\r\n    store.commit(AllMutationTypes.AUTH.SET_API_ACCESS_TOKEN, loginResult.token);\r\n    this.resMessage = \"Login success, redirect to home after 3 sec ...\";\r\n    // sleep\r\n    await sleep(3000);\r\n    routes.push({ name: \"Home\" });\r\n    return;\r\n  }\r\n  // sent the login request to server\r\n  private async sentLoginRequest(\r\n    username: any,\r\n    password: any\r\n    // position: PositionPoint\r\n  ): Promise<LoginResponse> {\r\n    return new Promise<LoginResponse>((resolve, reject) => {\r\n      // try {\r\n      axios\r\n        .post<LoginResponse>(\"/api/login\", {\r\n          username: username,\r\n          password: password,\r\n          // position: position,\r\n        })\r\n        .then((resp) => {\r\n          resolve(resp.data);\r\n        })\r\n        .catch((e) => {\r\n          reject(\"Error when call /api/login : \" + e);\r\n        });\r\n    });\r\n  }\r\n  // check if the input format correct\r\n  private async checkInputCorrect(\r\n    username: any,\r\n    password: any\r\n  ): Promise<string> {\r\n    // check\r\n    return \"\";\r\n  }\r\n}\r\n","import { render } from \"./Login.vue?vue&type=template&id=fec49d2a&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=ts\"\nexport * from \"./Login.vue?vue&type=script&lang=ts\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=fec49d2a&scope=true&lang=css\"\nimport \"./Login.vue?vue&type=style&index=1&id=fec49d2a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-fec49d2a\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=fec49d2a&scope=true&lang=css\""],"sourceRoot":""}